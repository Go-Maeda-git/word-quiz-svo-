<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èªå°¾ã§å“è©ã‚¯ã‚¤ã‚º</title>
    <style>
        body {
            font-family: sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f9;
            color: #333;
        }
        .quiz-container {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 600px;
            text-align: center;
        }
        h1 {
            color: #333;
            margin-bottom: 10px;
        }
        h2 {
            color: #1E90FF; /* Streamlitã®é’ã£ã½ã„è‰² */
            font-size: 2.5em;
            margin-top: 10px;
            margin-bottom: 20px;
        }
        .question-info {
            font-size: 0.9em;
            color: #555;
            margin-bottom: 20px;
        }
        .options button {
            background-color: #007bff; /* ãƒ—ãƒ©ã‚¤ãƒãƒªãƒœã‚¿ãƒ³ã®è‰² */
            color: white;
            border: none;
            padding: 12px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.3s;
            width: calc(50% - 10px); /* 2åˆ—è¡¨ç¤º */
        }
        .options button:hover {
            background-color: #0056b3;
        }
        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 5px;
            font-size: 1.1em;
        }
        .feedback.correct {
            background-color: #d4edda; /* Streamlitã®successè‰² */
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .feedback.incorrect {
            background-color: #f8d7da; /* Streamlitã®errorè‰² */
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .examples, .note {
            text-align: left;
            margin-top: 10px;
            padding: 10px;
            background-color: #e9ecef; /* Streamlitã®infoè‰² */
            border-radius: 5px;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        .examples ul {
            list-style-type: "- ";
            padding-left: 20px;
            margin: 0;
        }
        .next-button, .retry-button {
            background-color: #28a745; /* ç·‘è‰² */
            color: white;
            border: none;
            padding: 12px 25px;
            margin-top: 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1em;
            width: 100%;
        }
        .next-button:hover, .retry-button:hover {
            background-color: #1e7e34;
        }
        hr {
            border: 0;
            height: 1px;
            background: #ddd;
            margin: 20px 0;
        }
        .score-display {
            font-size: 1.2em;
            margin-bottom: 15px;
        }
        /* ã‚¹ãƒãƒ›å‘ã‘ã«ãƒœã‚¿ãƒ³ã®æ¨ªå¹…èª¿æ•´ */
        @media (max-width: 480px) {
            .options button {
                width: 100%; /* 1åˆ—è¡¨ç¤º */
            }
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <h1>ğŸ” èªå°¾ã§å“è©ã‚¯ã‚¤ã‚º</h1>
        <p>è¡¨ç¤ºã•ã‚ŒãŸèªå°¾ãŒã€ä¸»ã«ã©ã®å“è©ã§ä½¿ã‚ã‚Œã‚‹ã‹ã‚’é¸ã‚“ã§ãã ã•ã„ã€‚</p>
        <hr>

        <div id="question-area">
            <p class="question-info" id="question-count"></p>
            <h2 id="suffix-display"></h2>
            <p id="suffix-note-display" style="text-align: center; color: #FF6347;"></p>
            <hr>
            <div class="options" id="options-buttons">
                <!-- ãƒœã‚¿ãƒ³ã¯JavaScriptã§ç”Ÿæˆ -->
            </div>
        </div>

        <div id="feedback-area" class="feedback" style="display:none;">
            <p id="feedback-text"></p>
            <div id="examples-container" class="examples" style="display:none;">
                <strong>å˜èªä¾‹:</strong>
                <ul id="example-list"></ul>
            </div>
            <div id="note-container" class="note" style="display:none;">
                ğŸ“ <strong>è£œè¶³:</strong> <span id="note-text"></span>
            </div>
        </div>

        <button id="next-question-button" class="next-button" style="display:none;">æ¬¡ã®å•é¡Œã¸</button>

        <div id="results-area" style="display:none;">
            <h2>ğŸ‰ ã‚¯ã‚¤ã‚ºçµ‚äº†ï¼ ğŸ‰</h2>
            <h3>ã‚ãªãŸã®æˆç¸¾:</h3>
            <p class="score-display" id="final-score"></p>
            <p class="score-display" id="total-questions"></p>
            <p class="score-display" id="accuracy"></p>
            <hr>
            <button id="retry-quiz-button" class="retry-button">ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ã™ã‚‹</button>
        </div>
    </div>

    <script>
        const suffixDataList = [
            // åè©ã®èªå°¾
            {"suffix": "-ance", "pos": "åè©", "examples": ["performance (å…¬æ¼”)", "maintenance (ä¿å®ˆç‚¹æ¤œ)", "distance (è·é›¢)"], "note": null},
            {"suffix": "-cy", "pos": "åè©", "examples": ["policy (æ–¹é‡)", "emergency (ç·Šæ€¥äº‹æ…‹)", "agency (ä»£ç†åº—)"], "note": null},
            {"suffix": "-sion", "pos": "åè©", "examples": ["decision (æ±ºå®š)", "extension (å†…ç·š)", "permission (è¨±å¯)"], "note": null},
            {"suffix": "-tion", "pos": "åè©", "examples": ["position (è·)", "presentation (ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³)", "information (æƒ…å ±)"], "note": null},
            {"suffix": "-ty", "pos": "åè©", "examples": ["community (å…±åŒä½“)", "facility (æ–½è¨­)", "opportunity (æ©Ÿä¼š)"], "note": null},
            {"suffix": "-ness", "pos": "åè©", "examples": ["business (ä¼šç¤¾)", "effectiveness (åŠ¹æœ)", "fitness (å¥åº·)"], "note": null},
            {"suffix": "-ment", "pos": "åè©", "examples": ["document (æ›¸é¡)", "department (éƒ¨)", "management (çµŒå–¶)"], "note": null},
            {"suffix": "-sis", "pos": "åè©", "examples": ["analysis (åˆ†æ)", "emphasis (å¼·èª¿)", "basis (åŸºç›¤)"], "note": null},
            {"suffix": "-ee", "pos": "åè©", "examples": ["employee (å¾“æ¥­å“¡)", "trainee (ç ”ä¿®ç”Ÿ)"], "note": null},
            // å‹•è©ã®èªå°¾
            {"suffix": "-fy", "pos": "å‹•è©", "examples": ["identify (ã€œã‚’æ˜ã‚‰ã‹ã«ã™ã‚‹)", "notify (ã€œã‚’çŸ¥ã‚‰ã›ã‚‹)", "modify (ã€œã‚’å¤‰æ›´ã™ã‚‹)"], "note": null},
            {"suffix": "-ize/-ise", "pos": "å‹•è©", "examples": ["realize (ã€œã‚’èªè­˜ã™ã‚‹)", "organize (ã€œã‚’æº–å‚™ã™ã‚‹)", "specialize (å°‚é–€ã«ã™ã‚‹)"], "note": "â€» -ise ã®ç¶´ã‚Šã‚‚åŒæ„ (ä¾‹: organise)"},
            {"suffix": "-en", "pos": "å‹•è©", "examples": ["broaden (ã€œã‚’åºƒã’ã‚‹)", "widen (ã€œã‚’åºƒã’ã‚‹)", "sharpen (ã€œã‚’ç ”ã)"], "note": "å½¢å®¹è©ãªã©ã‹ã‚‰å‹•è©ã‚’ä½œã‚‹åƒããŒã‚ã‚Šã¾ã™ã€‚"},
            {"suffix": "-ate", "pos": "å‹•è©", "examples": ["create (ã€œã‚’å‰µé€ ã™ã‚‹)", "indicate (ã€œã‚’ç¤ºã™)", "donate (ã€œã‚’å¯„ä»˜ã™ã‚‹)"], "note": "å½¢å®¹è©ã®èªå°¾ã«ã‚‚ãªã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ (ä¾‹: considerate)ã€‚"},
            // å½¢å®¹è©ã®èªå°¾
            {"suffix": "-ous", "pos": "å½¢å®¹è©", "examples": ["delicious (ãŠã„ã—ã„)", "serious (æœ¬æ°—ã®)", "previous (ä»¥å‰ã®)"], "note": null},
            {"suffix": "-ble", "pos": "å½¢å®¹è©", "examples": ["available (æ‰‹ã«å…¥ã‚‹)", "possible (å¯èƒ½ãª)", "reasonable (æ‰‹ã”ã‚ãª)"], "note": null},
            {"suffix": "-ful", "pos": "å½¢å®¹è©", "examples": ["successful (æˆåŠŸã—ã¦ã„ã‚‹)", "careful (æ…é‡ãª)", "useful (å½¹ã«ç«‹ã¤)"], "note": null},
            {"suffix": "-cal", "pos": "å½¢å®¹è©", "examples": ["local (åœ°å…ƒã®)", "historical (æ­´å²çš„ãª)", "economical (çµŒæ¸ˆçš„ãª)"], "note": null},
            {"suffix": "-cial", "pos": "å½¢å®¹è©", "examples": ["financial (è²¡æ”¿ã®)", "special (ç‰¹åˆ¥ãª)", "official (å…¬å¼ãª)"], "note": null},
            {"suffix": "-nal", "pos": "å½¢å®¹è©", "examples": ["international (å›½éš›çš„ãª)", "additional (è¿½åŠ ã®)", "personal (å€‹äººçš„ãª)"], "note": null},
            {"suffix": "-ive", "pos": "å½¢å®¹è©", "examples": ["expensive (å€¤æ®µãŒé«˜ã„)", "effective (åŠ¹æœçš„ãª)", "competitive (ç«¶äº‰åŠ›ã®ã‚ã‚‹)"], "note": null},
            // å‰¯è©ã®èªå°¾
            {"suffix": "-ly", "pos": "å‰¯è©", "examples": ["usually (æ™®é€šã¯)", "recently (æœ€è¿‘)", "frequently (é »ç¹ã«)"], "note": "ã€è¦æ³¨æ„ã€‘åè©ã« -ly ãŒã¤ãã¨å½¢å®¹è©ã«ãªã‚‹ã‚‚ã®ãŒã‚ã‚Šã¾ã™ (ä¾‹: friendly, costly, timely, daily)ã€‚"},
            // -ly ãŒå½¢å®¹è©ã«ãªã‚‹ã‚±ãƒ¼ã‚¹ã‚‚å€‹åˆ¥ã«è¿½åŠ 
            {"suffix": "-ly (ä¾‹å¤–)", "pos": "å½¢å®¹è©", "examples": ["friendly (è¦ªåˆ‡ãª)", "costly (è²»ç”¨ã®ã‹ã‹ã‚‹)", "orderly (æ•´ç„¶ã¨ã—ãŸ)", "timely (ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã®ã„ã„)", "daily (æ¯æ—¥ã®)"], "note": "ã“ã‚Œã‚‰ã¯åè©ã« -ly ãŒã¤ã„ã¦å½¢å®¹è©ã«ãªã£ãŸä¾‹ã§ã™ã€‚"},
        ];

        let currentQuestionIndex = 0;
        let score = 0;
        let shuffledSuffixList = [];

        const questionCountEl = document.getElementById('question-count');
        const suffixDisplayEl = document.getElementById('suffix-display');
        const suffixNoteDisplayEl = document.getElementById('suffix-note-display');
        const optionsButtonsEl = document.getElementById('options-buttons');
        const feedbackAreaEl = document.getElementById('feedback-area');
        const feedbackTextEl = document.getElementById('feedback-text');
        const examplesContainerEl = document.getElementById('examples-container');
        const exampleListEl = document.getElementById('example-list');
        const noteContainerEl = document.getElementById('note-container');
        const noteTextEl = document.getElementById('note-text');
        const nextQuestionButtonEl = document.getElementById('next-question-button');
        const questionAreaEl = document.getElementById('question-area');
        const resultsAreaEl = document.getElementById('results-area');
        const finalScoreEl = document.getElementById('final-score');
        const totalQuestionsEl = document.getElementById('total-questions');
        const accuracyEl = document.getElementById('accuracy');
        const retryQuizButtonEl = document.getElementById('retry-quiz-button');

        const posOptions = ["åè©", "å‹•è©", "å½¢å®¹è©", "å‰¯è©"];

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function startQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            shuffledSuffixList = shuffleArray([...suffixDataList]);
            questionAreaEl.style.display = 'block';
            resultsAreaEl.style.display = 'none';
            nextQuestionButtonEl.style.display = 'none';
            feedbackAreaEl.style.display = 'none';
            displayQuestion();
        }

        function displayQuestion() {
            if (currentQuestionIndex < shuffledSuffixList.length) {
                const questionData = shuffledSuffixList[currentQuestionIndex];
                questionCountEl.textContent = `å•é¡Œ ${currentQuestionIndex + 1} / ${shuffledSuffixList.length}`;
                suffixNoteDisplayEl.textContent = ''; // ãƒªã‚»ãƒƒãƒˆ

                if (questionData.suffix === "-ly (ä¾‹å¤–)") {
                    suffixDisplayEl.textContent = "-ly";
                    suffixNoteDisplayEl.textContent = "â€» ãŸã ã—ã€ã“ã‚ŒãŒå½¢å®¹è©ã«ãªã‚‹å ´åˆã®ä¾‹ã§ã™ã€‚";
                } else {
                    suffixDisplayEl.textContent = questionData.suffix;
                }

                optionsButtonsEl.innerHTML = ''; // æ—¢å­˜ã®ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªã‚¢
                posOptions.forEach(option => {
                    const button = document.createElement('button');
                    button.textContent = option;
                    button.onclick = () => handleAnswer(option, questionData.pos, questionData.examples, questionData.note);
                    optionsButtonsEl.appendChild(button);
                });
                feedbackAreaEl.style.display = 'none';
                nextQuestionButtonEl.style.display = 'none';
            } else {
                displayResults();
            }
        }

        function handleAnswer(userChoice, correctPos, examples, note) {
            optionsButtonsEl.querySelectorAll('button').forEach(button => button.disabled = true); // ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–

            feedbackAreaEl.style.display = 'block';
            if (userChoice === correctPos) {
                feedbackTextEl.textContent = `æ­£è§£ï¼ ğŸ‰ ã€Œ${shuffledSuffixList[currentQuestionIndex].suffix}ã€ã¯ä¸»ã« ${correctPos} ã®èªå°¾ã§ã™ã€‚`;
                feedbackAreaEl.className = 'feedback correct';
                score++;
            } else {
                feedbackTextEl.textContent = `æ®‹å¿µï¼ ã€Œ${shuffledSuffixList[currentQuestionIndex].suffix}ã€ã®ä¸»ãªå“è©ã¯ ${correctPos} ã§ã—ãŸã€‚(ã‚ãªãŸã®å›ç­”: ${userChoice})`;
                feedbackAreaEl.className = 'feedback incorrect';
            }

            if (examples && examples.length > 0) {
                exampleListEl.innerHTML = '';
                examples.forEach(ex => {
                    const li = document.createElement('li');
                    li.textContent = ex;
                    exampleListEl.appendChild(li);
                });
                examplesContainerEl.style.display = 'block';
            } else {
                examplesContainerEl.style.display = 'none';
            }

            if (note) {
                noteTextEl.textContent = note;
                noteContainerEl.style.display = 'block';
            } else {
                noteContainerEl.style.display = 'none';
            }

            nextQuestionButtonEl.style.display = 'block';
        }

        function displayNextQuestion() {
            currentQuestionIndex++;
            optionsButtonsEl.querySelectorAll('button').forEach(button => button.disabled = false); // ãƒœã‚¿ãƒ³ã‚’æœ‰åŠ¹åŒ–
            displayQuestion();
        }

        function displayResults() {
            questionAreaEl.style.display = 'none';
            feedbackAreaEl.style.display = 'none';
            nextQuestionButtonEl.style.display = 'none';
            resultsAreaEl.style.display = 'block';

            finalScoreEl.textContent = `âœ… æ­£è§£æ•°: ${score}`;
            totalQuestionsEl.textContent = `ğŸ“– ç·å•é¡Œæ•°: ${shuffledSuffixList.length}`;
            const accuracyPercentage = shuffledSuffixList.length > 0 ? (score / shuffledSuffixList.length) * 100 : 0;
            accuracyEl.textContent = `ğŸ¯ æ­£ç­”ç‡: ${accuracyPercentage.toFixed(2)}%`;
        }

        nextQuestionButtonEl.addEventListener('click', displayNextQuestion);
        retryQuizButtonEl.addEventListener('click', startQuiz);

        // ã‚¯ã‚¤ã‚ºã‚’é–‹å§‹
        startQuiz();
    </script>
</body>
</html>
